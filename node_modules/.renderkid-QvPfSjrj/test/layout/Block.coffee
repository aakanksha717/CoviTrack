Layout = require '../../src/Layout'
{object} = require 'utila'

{open, get, conf} = do ->
  show = (layout) ->
    got = layout.get()
    got = got.replace /<[^>]+>/g, ''

  defaultBlockConfig =
    linePrependor: options: amount: 2

  c = (add = {}) ->
    object.append defaultBlockConfig, add

  ret = {}

  ret.open = (block, name, top = 0, bottom = 0) ->
    config = c
      blockPrependor: options: amount: top
      blockAppendor: options: amount: bottom

    b = block.openBlock config, name
    b.write name + ' | top ' + top + ' bottom ' + bottom
    b

  ret.get = (layout) ->
    layout.get().replace(/<[^>]+>/g, '')

  ret.conf = (props) ->
    config = {}
    if props.left?
      object.appendOnto config, linePrependor: options: amount: props.left

    if props.right?
      object.appendOnto config, lineAppendor:  options: amount: props.right

    if props.top?
      object.appendOnto config, blockPrependor: options: amount: props.top

    if props.bottom?
      object.appendOnto config, blockAppendor:  options: amount: props.bottom

    if props.width?
      object.appendOnto config, width: props.width

    if props.bullet is yes
      object.appendOnto config, linePrependor: options: bullet: {char: '-', a